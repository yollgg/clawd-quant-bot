# 虚拟货币量化网格交易系统 - 执行与运行文档

## 1. 策略逻辑 (Strategy Logic)
- **准入与自适应判断**: 系统每 5 秒监测一次市价。如果市价偏离当前网格中心超过 **2%**，系统会自动以当前价格为新中轴重新布网，实现“自动对齐”，防止踏空或价格脱离区间。
- **网格布局**: 以中轴为中心，上下每隔 0.5% 设置一层网格，共 10 层（5 买 5 卖）。
- **做多逻辑 (Grid Long)**: 初始买入 50% 仓位。价格下跌触发买入网格（加仓），价格上涨触发卖出网格（减仓止盈）。

## 2. 核心代码模块
- **`GridStrategyEngine`**: 策略核心，负责模拟价格、管理网格列表和执行买卖逻辑。
- **`PortfolioController`**: 提供 REST API (`/portfolio`)，供外部监控程序实时查询仓位、价格、盈亏和成交历史。
- **`quant-bot-monitor.js`**: 外部 Node.js 脚本，每 10 秒轮询一次 API，检测到 `lastTrades` 有更新时通过 Telegram 主动推送。

## 3. 运行与监控
1. **启动后端**: `cd quant-bot && mvn spring-boot:run`
2. **启动监控**: `node quant-bot-monitor.js`
3. **查看实时持仓**: `curl http://localhost:8080/portfolio`

## 4. 模拟运行记录 (2026-01-28)
- **初始投入**: 10,000 USDT
- **当前状态**: 已实现自动化成交推送。由于 BTC 快速冲高，系统已完成一次自动网格重置，并已触发多笔止盈/补仓操作。

---
*注：本程序目前运行在 Mock 模式下，未配置 API Key 不会产生真实交易。*
